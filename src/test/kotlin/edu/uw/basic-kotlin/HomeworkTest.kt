/*
 * This Kotlin source file was generated by the Gradle 'init' task.
 */
package edu.uw.basickotlin

import kotlin.test.Test
import kotlin.test.*

class HomeworkTest {
    @Test fun testSomeLibraryMethod() {
        val classUnderTest = Library()
        assertTrue(classUnderTest.someLibraryMethod(), "someLibraryMethod should return 'true'")
    }

    // =================
    // whenFn tests
    @Test fun when_Hello() {
        assertEquals(whenFn("Hello"), "world")
    }
    @Test fun when_Howdy() {
        assertEquals(whenFn("Howdy"), "Say what?")
    }
    @Test fun when_Bonjour() {
        assertEquals(whenFn("Bonjour"), "Say what?")
    }
    @Test fun when_ints() {
        val when_tests = listOf(
            0 to "zero",
            1 to "one",
            5 to "low number",
            9 to "low number",
            17.0 to "I don't understand"
        )
        for ((k,v) in when_tests) {
            assertEquals(whenFn(k), v)
        }
    }
    // 1st additional test
    @Test fun when_Good() {
        assertEquals(whenFn("Good"), "Say what?")
    }
    // 2nd additional test
    @Test fun when_double() {
        assertEquals(whenFn(2.2), "I don't understand")
    }

    // =================
    // add/sub/mathOp tests
    @Test fun addition_tests() {
        val add_tests = listOf(
            Pair(0, 0) to 0,
            Pair(1, 2) to 3,
            Pair(-2, 2) to 0,
            Pair(123, 456) to 579
        )
        for ( (k,v) in add_tests) {
            assertEquals(add(k.first, k.second), v)
        }
    }

    @Test fun subtraction_tests() {
        val sub_tests = listOf(
            Pair(0, 0) to 0,
            Pair(2, 1) to 1,
            Pair(-2, 2) to -4,
            Pair(456, 123) to 333
        )
        for ( (k,v) in sub_tests) {
            assertEquals(sub(k.first, k.second), v)
        }
    }

    @Test fun mathOp_tests() {
        assertEquals(4, mathOp(2, 2, { l,r -> l+r} ))
        assertEquals(4, mathOp(2, 2, ::add ))
        assertEquals(0, mathOp(2, 2, ::sub ))
        assertEquals(16, mathOp(4, 4, { l,r -> l*r} ))
    }

    // 3rd additional test
    @Test fun add_test() {
        val add_tests = listOf(
            Pair(-5, -4) to -9,
            Pair(11, 2) to 13
        )
        for ( (k,v) in add_tests) {
            assertEquals(add(k.first, k.second), v)
        }
    }

    // 4th additional test
    @Test fun sub_test() {
        val sub_tests = listOf(
            Pair(-5, -4) to -1,
            Pair(11, 2) to 9
        )
        for ( (k,v) in sub_tests) {
            assertEquals(sub(k.first, k.second), v)
        }
    }

    // 5th additional test
    @Test fun mathOp_tests2() {
        assertEquals(100, mathOp(45, 55, { l,r -> l+r} ))
        assertEquals(0, mathOp(2, 2, ::sub ))
    }

    // =================
    // Person tests
    @Test fun Person_tests() {
        val p1 = Person("Ted", "Neward", 48)
        assertEquals("Ted", p1.firstName )
        assertEquals(48, p1.age)
        assertEquals("[Person firstName:Ted lastName:Neward age:48]", p1.debugString)
    }

    // 6th additional test
    @Test fun Person_test2() {
        val p = Person("Terrence", "Quan", 22)
        assertEquals("Terrence", p.firstName)
        assertEquals("Quan", p.lastName)
        assertEquals(22, p.age)
        assertEquals("[Person firstName:Terrence lastName:Quan age:22]", p.debugString)
    }

    // =================
    // Money tests
    @Test fun Money_sanityTests() {
        val negEx = assertFailsWith(IllegalArgumentException::class) {
            Money(-5, "USD")
        }

        val currEx = assertFailsWith(IllegalArgumentException::class) {
            Money(10, "YEN")
        }
    }
    val tenUSD = Money(10, "USD")
    val twelveUSD = Money(12, "USD")
    val fiveGBP = Money(5, "GBP")
    val fifteenEUR = Money(15, "EUR")
    val fifteenCAN = Money(15, "CAN")
    @Test fun Money_convertTests() {
        val tests = listOf(
            Pair(tenUSD, tenUSD),
            Pair(tenUSD, fiveGBP),
            Pair(tenUSD, fifteenEUR),
            Pair(twelveUSD, fifteenCAN),
            Pair(fiveGBP, tenUSD),
            Pair(fiveGBP, fifteenEUR),
            Pair(fifteenEUR, fiveGBP)
        )
        for ( (from,to) in tests) {
            assertEquals(to.amount, from.convert(to.currency).amount)
        }
    }
    @Test fun Money_addTests() {
        val tests = listOf(
            Pair(tenUSD, tenUSD) to Money(20, "USD"),
            Pair(tenUSD, fiveGBP) to Money(20, "USD"),
            Pair(fiveGBP, tenUSD) to Money(10, "GBP")
        )
        for ( (pair, result) in tests) {
            assertEquals(result.amount, (pair.first + pair.second).amount)
            assertEquals(result.currency, (pair.first + pair.second).currency)
        }
    }

    // 7th additional test
    @Test fun Money_addTests2() {
        var money1 = Money(10, "USD")
        var money2 = Money(15, "EUR")
        assertEquals(20, (money1 + money2).amount)
        assertEquals("USD", (money1 + money2).currency)
    }
}
